# this script builds pandoc to use for markdown input
# at some point it might be simpler just to use pyparsing instead
# requires vagrant/virtualbox

git clone https://bitbucket.org/puffnfresh/vagrant-haskell-heroku.git
cd vagrant-haskell-heroku
vagrant up
vagrant ssh


apt-get install cabal
cabal update
cabal install cabal cabal-install
cabal --version
cabal install hsb2hs
cabal install pandoc -fembed_data_files
/home/vagrant/.cabal/bin/pandoc --version
cp /home/vagrant/.cabal/bin/pandoc /vagrant/pandoc

# other flags?
--enable-executable-stripping


#on 12.04
apt-get update
apt-get install haskell-platform
apt-get install cabal
cabal update
cabal install cabal cabal-install
git clone https://github.com/jgm/pandoc.git
cd pandoc/
git submodule update --init
cabal install --flags="embed_data_files" citeproc-hs hsb2hs
cabal install --only-dependencies
cabal configure --flags=embed_data_files
cabal build
cp dist/build/pandoc /vagrant/pandoc


cabal copy --destdir=/vagrant/
cabal register

